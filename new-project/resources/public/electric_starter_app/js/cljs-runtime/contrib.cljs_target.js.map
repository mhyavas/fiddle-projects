{"version":3,"sources":["contrib/cljs_target.cljc"],"mappings":";;;;AAQS,oCAAA,pCAAMA;AAAN,AAAiB,iFAAA,1EAACC,6CAAEC;;AACpB,qCAAA,rCAAMC;AAAN,AAAkB,iFAAA,1EAACF,6CAAEC","names":["contrib.cljs-target/nodejs?","cljs.core._EQ_","cljs.core/*target*","contrib.cljs-target/browser?"],"sourcesContent":["(ns contrib.cljs-target\r\n  \"Do not guard this require to cljs only, it contains clj macros. It is safe to \r\nrequire from clj and cljs due to careful consideration below.\"\r\n  #?(:cljs (:require-macros [contrib.cljs-target]))\r\n  ;(:require cljs.env) -- clojurescript must be on classpath during server macroexpansion (AOT or runtime depending on config)\r\n  #?(:cljs (:require [goog.object :as object])))\r\n\r\n; preferred runtime check for target through public API https://cljs.github.io/api/cljs.core/STARtargetSTAR\r\n#?(:cljs (defn nodejs? [] (= cljs.core/*target* \"nodejs\")))\r\n#?(:cljs (defn browser? [] (= cljs.core/*target* \"default\")))\r\n\r\n;(defmacro do-cljs [& body] (when (some? (:js-globals &env)) `(do ~@body)))\r\n\r\n; undocumented hack, only works in macros. https://stackoverflow.com/a/47499855\r\n#?(:clj (defn- cljs-target []\r\n          ; don't force app to :require clojurescript at runtime on the server\r\n          ; (It's okay if you do, it just means clojurescript must be on server classpath)\r\n          (when-some [compiler @(requiring-resolve 'cljs.env/*compiler*)]\r\n            (get-in @compiler [:options :closure-defines 'cljs.core/*target*]))))\r\n\r\n(defmacro do-nodejs  [& body] (if     (= \"nodejs\" (cljs-target)) `(do ~@body)))\r\n(defmacro do-browser [& body] (if-not (= \"nodejs\" (cljs-target)) `(do ~@body)))\r\n"],"x_google_ignoreList":[0]}